# Chatbot - Critical Security Warning (OpenAI API Key Exposure)

This document highlights a significant security vulnerability present in the current implementation of the `Chatbot` component within UniCentral.

## The Vulnerability

The `Chatbot` component directly initializes the `OpenAI` client on the client-side (frontend) and uses an API key (`VITE_OPENAI_API_KEY`) that is exposed in the browser.

```typescript
// --- SECURITY WARNING ---
// The following code initializes the OpenAI API client on the client-side.
// This is NOT a secure practice for production environments as it exposes
// the API key to anyone inspecting the browser's network traffic.
//
// RECOMMENDATION:
// Move this AI logic to a secure backend server or a serverless function.
// The frontend should make a request to your backend, which then securely
// calls the OpenAI API. This protects your API key and allows for better
// control over your API usage.
//
// For development purposes, you can set the API key in a .env file:
// VITE_OPENAI_API_KEY=your-openrouter-api-key
const openai = new OpenAI({
  apiKey: import.meta.env.VITE_OPENAI_API_KEY,
  baseURL: "https://openrouter.ai/api/v1", // OpenRouter base URL
  dangerouslyAllowBrowser: true // Required for client-side usage
});
```

### Explanation of Risk
- **API Key Exposure:** When the application runs in a web browser, anyone with basic developer tools knowledge can inspect the network requests made by the application. The `VITE_OPENAI_API_KEY` is sent with every request to OpenRouter/OpenAI, making it trivially easy for malicious actors to extract and steal the API key.
- **Unauthorized Usage and Billing Abuse:** Once an API key is compromised, it can be used by unauthorized individuals to make requests to the AI API. This can lead to:
    - **Unexpected Billing Charges:** The legitimate owner of the API key (UniCentral) will be billed for all usage, including that generated by the malicious actor.
    - **Rate Limit Exhaustion:** Malicious usage can quickly exhaust the API's rate limits, leading to denial of service for legitimate users of UniBot.
    - **Abuse of Service:** The compromised key could be used for purposes entirely unrelated to UniCentral, potentially damaging the reputation of the platform or the service provider.

## Recommendation for Production Environments

**It is HIGHLY recommended that this AI logic be moved to a secure backend server or a serverless function.**

### How to Implement a Secure Solution:
1.  **Backend Proxy/API Endpoint:** Create a dedicated API endpoint on a secure backend server (e.g., Node.js with Express, Python with FastAPI, etc.) or a serverless function (e.g., AWS Lambda, Google Cloud Functions, Vercel Functions).
2.  **Secure API Key Storage:** Store the `VITE_OPENAI_API_KEY` ONLY on this backend server (e.g., in environment variables, a secure vault, or a secrets manager). **Never commit it to version control or include it in client-side bundles.**
3.  **Frontend Request:** The `Chatbot` component on the frontend should then make requests to *your* secure backend API endpoint, passing only the `userMessage`.
4.  **Backend to AI API:** Your backend endpoint will receive the `userMessage`, securely make the request to the OpenRouter/OpenAI API using the protected API key, receive the AI's response, and then return that response to the frontend.
5.  **Control and Monitoring:** A backend solution provides greater control over API usage, allows for logging, rate limiting, and additional security measures.

### Impact of Not Addressing the Vulnerability
Failing to address this vulnerability before deploying to a production environment can lead to significant financial costs due to API misuse, service disruptions, and potential reputational damage.

## Current Status (Development)
For current development purposes, the `dangerouslyAllowBrowser: true` flag and client-side API key usage are in place to facilitate rapid iteration and testing. This setup should **NOT** be used for public-facing deployments.
